# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`sshd`](#sshd): Configure default sshd settings

### Defined types

* [`sshd::allow_from`](#sshdallow_from): Enable incoming ssh for a given set of hosts

## Classes

### <a name="sshd"></a>`sshd`

Configure default sshd settings

#### Examples

##### 

```puppet
include sshd
```

#### Parameters

The following parameters are available in the `sshd` class:

* [`trusted_subnets`](#trusted_subnets)
* [`config`](#config)
* [`config_matches`](#config_matches)
* [`banner`](#banner)
* [`banner_ignore`](#banner_ignore)
* [`revoked_keys`](#revoked_keys)
* [`required_packages`](#required_packages)
* [`revoked_keys_file`](#revoked_keys_file)

##### <a name="trusted_subnets"></a>`trusted_subnets`

Data type: `Array`

Array of IPs and CIDRs to be allowed through the firewall
Values from multiple sources are merged

##### <a name="config"></a>`config`

Data type: `Hash`

Hash of global config settings
Defaults provided by this module
Values from multiple sources are merged
Key collisions are resolved in favor of the higher priority value

##### <a name="config_matches"></a>`config_matches`

Data type: `Hash[String,Hash]`

Hash of config "match" conditions and settings.
Keys are match condition.
Vals are a hash of sshd_config settings for the match condition.
Expected format:
```
---
sshd::config_matches:
  Unique condition one:
    SettingOne: val
    SettingTwo:
      - val2
      - val3
  Unique condition two:
    SettingOne: val
    SettingTwo:
      - val2
      - val3
Note that condition strings must be valid sshd_config criteria-pattern pairs
Values from multiple sources are merged
Key collisions are resolved in favor of the higher priority value
Merges are deep to allow use of the knockout_prefix '-' (to remove a key
from the final result).
```

##### <a name="banner"></a>`banner`

Data type: `Optional[String]`

A string to create a banner to display before login.
Use to display before authentication.
Defining this automatically sets the sshd_config option.
If you define the Banner config in hiera, the Puppet agent will not run.
Example of hiera data:
```
sshd::banner: |2+

  Login with NCSA Kerberos + NCSA Duo multi-factor.

  DUO Documentation:  https://go.ncsa.illinois.edu/2fa
```

Default value: ``undef``

##### <a name="banner_ignore"></a>`banner_ignore`

Data type: `Boolean`

Disable setting banner in sshd even if banner content is set

##### <a name="revoked_keys"></a>`revoked_keys`

Data type: `Array[String]`

List of ssh public keys to disallow.
Values from multiple sources are merged.

##### <a name="required_packages"></a>`required_packages`

Data type: `Array[String]`

List of package names to be installed (OS specific).
(Defaults provided by module should be sufficient).

##### <a name="revoked_keys_file"></a>`revoked_keys_file`

Data type: `String`



## Defined types

### <a name="sshdallow_from"></a>`sshd::allow_from`

Enable incoming ssh for a given set of hosts

Update iptables firewall

Update sshd_config with a Match directive and associated settings

Update access.conf

#### Examples

##### 

```puppet
sshd::allow_from { 'namevar': }
```

##### 

```puppet
ssh::allow_from { 'allow incoming ssh by users 1,2,3 from hosts X,Y,Z':
    'users'                   => Array,
    'groups'                  => Array,
    'hostlist'                => Array,
    'additional_match_params' => Hash,
}
```

#### Parameters

The following parameters are available in the `sshd::allow_from` defined type:

* [`users`](#users)
* [`groups`](#groups)
* [`hostlist`](#hostlist)
* [`additional_match_params`](#additional_match_params)

##### <a name="users"></a>`users`

Data type: `Array[ String ]`

List of users to allow (from hostlist)

Note: If both "users" and "groups" are empty, error is raised.

Default value: `[]`

##### <a name="groups"></a>`groups`

Data type: `Array[ String ]`

List of groups to allow (from hostlist)

Note: If both "users" and "groups" are empty, error is raised.

Default value: `[]`

##### <a name="hostlist"></a>`hostlist`

Data type: `Array[ String, 1 ]`

List of IPs or Hostnames that (users/groups) are allowed to ssh from

##### <a name="additional_match_params"></a>`additional_match_params`

Data type: `Hash[ String, Data ]`

Sshd config keywords and values.
Format:
additional_match_params = { 'keyword1' => 'value1',
                            'keyword2' => 'value2',
                            'keyword3' => [ 'val3_1','val3_2' ],
                          }

Default value: `{}`

